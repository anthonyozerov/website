<!--#include virtual="/head.html"-->
  <title>Morning Report</title>
  <link rel="stylesheet" href="/stylesheets/prettified.css">
</head>

<body>
  <h1>Morning Report</h1>
  <!--#include virtual="/header.html"-->
  <p>My morning report is a text file printed every morning on my dot-matrix printer. It contains:</p>
  <ul>
    <li>The current date and day of week</li>
    <li>My productivity statistics for the past day, week, month, year, and all-time</li>
    <li>My calendar items for today</li>
    <li>My todo-list items</li>
    <li>Today's sunrise and sunset times</li>
    <li>Today's hourly weather forecast, with temperature, feels-like, and a text description</li>
    <li>News headlines from RSS feeds</li>
    <li>Upcoming rocket launches</li>
  </ul>
  <p>This is done by 3 supporting Python scripts, a shell script to put them all together, and a cron job to automate it.</p>
  <img src=morning-report.png>
  <h2>cron job</h2>
  <p>The cron job merely runs the shell script daily at 07:45 and redirects the output to the printer:</p>
  <pre class="codeblock" style=""><span class="code">45 7 * * * ~/projects/morning-report/morning-report.sh > /dev/usb/lp0 2> ~/projects/log/error.txt</span></pre>
  <p>Note that stderr is redirected to an error logging file, for debugging purposes.</p>

  <h2>morning-report.sh</h2>
  <p>This script puts the results of all the other scripts together in a format that is nice for my printer to print, outputting it to stdout.</p>
  <pre class="codeblock"><span class="com">#!/bin/bash</span><span class="pln"><br><br>cd&nbsp;</span><span class="pun">~</span><span class="str">/projects/</span><span class="pln">morning</span><span class="pun">-</span><span class="pln">report<br></span><span class="pun">.</span><span class="pln">&nbsp;bin</span><span class="pun">/</span><span class="pln">activate<br>echo&nbsp;</span><span class="pun">-</span><span class="pln">ne&nbsp;</span><span class="str">"\x1B\x67"</span><span class="pln">&nbsp;</span><span class="com">#switch&nbsp;to&nbsp;15cpi</span><span class="pln"><br>python3&nbsp;log</span><span class="pun">-</span><span class="pln">report</span><span class="pun">.</span><span class="pln">py&nbsp;</span><span class="pun">&gt;</span><span class="pln">&nbsp;log</span><span class="pun">-</span><span class="pln">report<br>python3&nbsp;weather</span><span class="pun">-</span><span class="pln">report</span><span class="pun">.</span><span class="pln">py&nbsp;</span><span class="pun">&gt;</span><span class="pln">&nbsp;weather</span><span class="pun">-</span><span class="pln">report<br>paste&nbsp;log</span><span class="pun">-</span><span class="pln">report&nbsp;weather</span><span class="pun">-</span><span class="pln">report&nbsp;</span><span class="pun">|</span><span class="pln">&nbsp;column&nbsp;</span><span class="pun">-</span><span class="pln">s&nbsp;$</span><span class="str">'\t'</span><span class="pln">&nbsp;</span><span class="pun">-</span><span class="pln">tn<br>python3&nbsp;news</span><span class="pun">-</span><span class="pln">report</span><span class="pun">.</span><span class="pln">py&nbsp;</span><span class="pun">&gt;</span><span class="pln">&nbsp;news</span><span class="pun">-</span><span class="pln">report<br>cat&nbsp;news</span><span class="pun">-</span><span class="pln">report</span></pre>
  It first sources the Python3 virtual environment for this project on my raspberry pi, then it outputs a command that makes the printer switch the font size, then it runs log-report.py and weather-report.py, column-stacks and outputs them, and finally runs news-report.py and outputs it.
  <p>Source: <span class="code"><a href="morning-report.sh">morning-report.sh</a></span></p>

  
  <h2>log-report.py</h2>
  <p><span class="code">log-report.py</span> is a Python script which downloads my productivity data, makes some calculations and outputs it, and also downloads my calendar, interprets it, and outputs some useful information.</p>
  <pre class="codeblock"><span class="kwd">from</span><span class="pln">&nbsp;pyexcel_ods&nbsp;</span><span class="kwd">import</span><span class="pln">&nbsp;get_data<br></span><span class="kwd">import</span><span class="pln">&nbsp;numpy&nbsp;</span><span class="kwd">as</span><span class="pln">&nbsp;np<br></span><span class="kwd">import</span><span class="pln">&nbsp;pandas&nbsp;</span><span class="kwd">as</span><span class="pln">&nbsp;pd<br></span><span class="kwd">from</span><span class="pln">&nbsp;datetime&nbsp;</span><span class="kwd">import</span><span class="pln">&nbsp;datetime</span><span class="pun">,</span><span class="pln">&nbsp;date<br></span><span class="kwd">from</span><span class="pln">&nbsp;pytz&nbsp;</span><span class="kwd">import</span><span class="pln">&nbsp;timezone<br></span><span class="kwd">from</span><span class="pln">&nbsp;icalendar&nbsp;</span><span class="kwd">import</span><span class="pln">&nbsp;</span><span class="typ">Calendar</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="typ">Event</span><span class="pln"><br></span><span class="kwd">import</span><span class="pln">&nbsp;requests<br></span><span class="kwd">import</span><span class="pln">&nbsp;recurring_ical_events<br></span><span class="kwd">import</span><span class="pln">&nbsp;calendar<br><br>current</span><span class="pun">=</span><span class="pln">datetime</span><span class="pun">.</span><span class="pln">now</span><span class="pun">(</span><span class="pln">timezone</span><span class="pun">(</span><span class="str">'UTC'</span><span class="pun">))</span><span class="pln"><br></span><span class="kwd">print</span><span class="pun">(</span><span class="pln">str</span><span class="pun">(</span><span class="pln">current</span><span class="pun">.</span><span class="pln">date</span><span class="pun">())+</span><span class="str">",&nbsp;"</span><span class="pun">+</span><span class="pln">calendar</span><span class="pun">.</span><span class="pln">day_name</span><span class="pun">[</span><span class="pln">current</span><span class="pun">.</span><span class="pln">weekday</span><span class="pun">()]+</span><span class="str">"\n"</span><span class="pun">)</span></pre>
  
  <pre class="codeblock-result">2021-03-08, Monday<br><br></pre>
  
  <pre class="codeblock"><span class="pln">r</span><span class="pun">=</span><span class="pln">requests</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"[log&nbsp;url]"</span><span class="pun">)</span><span class="pln"><br></span><span class="kwd">with</span><span class="pln">&nbsp;open</span><span class="pun">(</span><span class="str">"logv2.ods"</span><span class="pun">,</span><span class="str">"wb"</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="kwd">as</span><span class="pln">&nbsp;f</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;f</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">r</span><span class="pun">.</span><span class="pln">content</span><span class="pun">)</span><span class="pln"><br><br>spread</span><span class="pun">=</span><span class="pln">get_data</span><span class="pun">(</span><span class="str">"logv2.ods"</span><span class="pun">)</span><span class="pln"><br><br>data</span><span class="pun">=</span><span class="pln">spread</span><span class="pun">[</span><span class="str">'Sheet1'</span><span class="pun">]</span><span class="pln"><br><br>columns</span><span class="pun">=[</span><span class="str">"D"</span><span class="pun">,</span><span class="str">"WD"</span><span class="pun">,</span><span class="str">"startutc"</span><span class="pun">,</span><span class="str">"startlocal"</span><span class="pun">,</span><span class="str">"activity"</span><span class="pun">,</span><span class="str">"detail"</span><span class="pun">,</span><span class="str">"people"</span><span class="pun">,</span><span class="str">"super"</span><span class="pun">,</span><span class="str">"spent"</span><span class="pun">,</span><span class="str">""</span><span class="pun">,</span><span class="str">"subplace"</span><span class="pun">,</span><span class="str">"place"</span><span class="pun">,</span><span class="str">"city"</span><span class="pun">,</span><span class="str">"country"</span><span class="pun">,</span><span class="str">"spentint"</span><span class="pun">]</span><span class="pln"><br><br>df</span><span class="pun">=</span><span class="pln">pd</span><span class="pun">.</span><span class="typ">DataFrame</span><span class="pun">(</span><span class="pln">data</span><span class="pun">,</span><span class="pln">columns</span><span class="pun">=</span><span class="pln">columns</span><span class="pun">)</span><span class="pln"><br>df</span><span class="pun">.</span><span class="pln">drop</span><span class="pun">([</span><span class="lit">0</span><span class="pun">],</span><span class="pln">inplace</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">)</span><span class="pln"><br>df</span><span class="pun">.</span><span class="pln">drop</span><span class="pun">([</span><span class="str">""</span><span class="pun">],</span><span class="pln">axis</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="pln">inplace</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">)</span><span class="pln"><br>df</span><span class="pun">.</span><span class="pln">reset_index</span><span class="pun">(</span><span class="pln">inplace</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">,</span><span class="pln">drop</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">)</span><span class="pln"><br>df</span><span class="pun">.</span><span class="pln">drop</span><span class="pun">(</span><span class="pln">df</span><span class="pun">.</span><span class="pln">tail</span><span class="pun">(</span><span class="lit">2</span><span class="pun">).</span><span class="pln">index</span><span class="pun">,</span><span class="pln">&nbsp;inplace&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="kwd">True</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="com">#drop&nbsp;last&nbsp;2&nbsp;rows</span><span class="pln"><br><br>df</span><span class="pun">[</span><span class="str">'activity'</span><span class="pun">].</span><span class="pln">replace</span><span class="pun">(</span><span class="str">''</span><span class="pun">,</span><span class="pln">&nbsp;np</span><span class="pun">.</span><span class="pln">nan</span><span class="pun">,</span><span class="pln">&nbsp;inplace</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">)</span><span class="pln"><br>df</span><span class="pun">.</span><span class="pln">dropna</span><span class="pun">(</span><span class="pln">subset</span><span class="pun">=[</span><span class="str">'activity'</span><span class="pun">],</span><span class="pln">&nbsp;inplace</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">)</span><span class="pln"><br><br></span><span class="kwd">def</span><span class="pln">&nbsp;get_n</span><span class="pun">(</span><span class="pln">threshold</span><span class="pun">):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;length</span><span class="pun">=</span><span class="pln">len</span><span class="pun">(</span><span class="pln">df</span><span class="pun">[</span><span class="str">"startutc"</span><span class="pun">])</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;n</span><span class="pun">=</span><span class="pln">min</span><span class="pun">(</span><span class="pln">threshold</span><span class="pun">*</span><span class="lit">120</span><span class="pun">,</span><span class="pln">length</span><span class="pun">-</span><span class="lit">2</span><span class="pun">)</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;delta</span><span class="pun">=</span><span class="pln">df</span><span class="pun">[</span><span class="str">"startutc"</span><span class="pun">][</span><span class="pln">length</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]-</span><span class="pln">df</span><span class="pun">[</span><span class="str">"startutc"</span><span class="pun">][</span><span class="pln">length</span><span class="pun">-</span><span class="pln">n</span><span class="pun">]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;days</span><span class="pun">=</span><span class="pln">delta</span><span class="pun">.</span><span class="pln">total_seconds</span><span class="pun">()/</span><span class="lit">3600</span><span class="pun">/</span><span class="lit">24</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">while</span><span class="pun">(</span><span class="pln">days</span><span class="pun">&gt;=</span><span class="pln">threshold</span><span class="pun">):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n</span><span class="pun">-=</span><span class="lit">1</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta</span><span class="pun">=</span><span class="pln">df</span><span class="pun">[</span><span class="str">"startutc"</span><span class="pun">][</span><span class="pln">length</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]-</span><span class="pln">df</span><span class="pun">[</span><span class="str">"startutc"</span><span class="pun">][</span><span class="pln">length</span><span class="pun">-</span><span class="pln">n</span><span class="pun">]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;days</span><span class="pun">=</span><span class="pln">delta</span><span class="pun">.</span><span class="pln">total_seconds</span><span class="pun">()/</span><span class="lit">3600</span><span class="pun">/</span><span class="lit">24</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln">&nbsp;n<br><br>labels</span><span class="pun">=[</span><span class="str">"productive"</span><span class="pun">,</span><span class="str">"fun"</span><span class="pun">,</span><span class="str">"routine"</span><span class="pun">,</span><span class="str">"waste"</span><span class="pun">]</span><span class="pln"><br>filters</span><span class="pun">=[{</span><span class="pln">LIST&nbsp;OF&nbsp;PRODUCTIVE&nbsp;STRINGS</span><span class="pun">},</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">LIST&nbsp;OF&nbsp;FUN&nbsp;STRINGS</span><span class="pun">},</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">LIST&nbsp;OF&nbsp;ROUTINE&nbsp;STRINGS</span><span class="pun">},</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">LIST&nbsp;OF&nbsp;WASTE&nbsp;STRINGS</span><span class="pun">}]</span><span class="pln"><br><br></span><span class="kwd">def</span><span class="pln">&nbsp;get_times</span><span class="pun">(</span><span class="pln">n</span><span class="pun">):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;i</span><span class="pun">=</span><span class="pln">n<br>&nbsp;&nbsp;&nbsp;&nbsp;total</span><span class="pun">=</span><span class="lit">0</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;times</span><span class="pun">=</span><span class="pln">np</span><span class="pun">.</span><span class="pln">zeros</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;total</span><span class="pun">=</span><span class="lit">0</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;length</span><span class="pun">=</span><span class="pln">len</span><span class="pun">(</span><span class="pln">df</span><span class="pun">[</span><span class="str">"startutc"</span><span class="pun">])</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;i&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;range</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln">n</span><span class="pun">+</span><span class="lit">1</span><span class="pun">):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;activity</span><span class="pun">=</span><span class="pln">df</span><span class="pun">[</span><span class="str">"activity"</span><span class="pun">][</span><span class="pln">length</span><span class="pun">-</span><span class="pln">i</span><span class="pun">]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time</span><span class="pun">=</span><span class="pln">df</span><span class="pun">[</span><span class="str">"spentint"</span><span class="pun">][</span><span class="pln">length</span><span class="pun">-</span><span class="pln">i</span><span class="pun">]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;activity&nbsp;</span><span class="pun">!=</span><span class="pln">&nbsp;</span><span class="str">"sleep"</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total</span><span class="pun">+=</span><span class="pln">time<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;j&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;range&nbsp;</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln">&nbsp;len</span><span class="pun">(</span><span class="pln">labels</span><span class="pun">)):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;activity&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;filters</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;times</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]+=</span><span class="pln">time<br><br>&nbsp;&nbsp;&nbsp;&nbsp;times</span><span class="pun">=</span><span class="pln">times</span><span class="pun">/</span><span class="pln">total<br>&nbsp;&nbsp;&nbsp;&nbsp;times</span><span class="pun">=[</span><span class="pln">round</span><span class="pun">(</span><span class="pln">t</span><span class="pun">,</span><span class="lit">3</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;t&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;times</span><span class="pun">]</span><span class="pln"><br></span><span class="com">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(0,len(times)):</span><span class="pln"><br></span><span class="com">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;times[i]=round(times[i],3)</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln">&nbsp;times<br><br></span><span class="kwd">def</span><span class="pln">&nbsp;output_times</span><span class="pun">(</span><span class="pln">days</span><span class="pun">,</span><span class="pln">&nbsp;timess</span><span class="pun">):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;df</span><span class="pun">=</span><span class="pln">pd</span><span class="pun">.</span><span class="typ">DataFrame</span><span class="pun">(</span><span class="pln">timess</span><span class="pun">.</span><span class="pln">T</span><span class="pun">,</span><span class="pln">columns</span><span class="pun">=</span><span class="pln">days</span><span class="pun">,</span><span class="pln">index</span><span class="pun">=</span><span class="pln">labels</span><span class="pun">)</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;df</span><span class="pun">.</span><span class="pln">columns</span><span class="pun">.</span><span class="pln">name</span><span class="pun">=</span><span class="str">'past&nbsp;days'</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">df</span><span class="pun">)</span><span class="pln"><br><br></span><span class="kwd">def</span><span class="pln">&nbsp;print_times</span><span class="pun">(</span><span class="pln">dayss</span><span class="pun">):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;timess</span><span class="pun">=[]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;days&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;dayss</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timess</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">get_times</span><span class="pun">(</span><span class="pln">get_n</span><span class="pun">(</span><span class="pln">days</span><span class="pun">)))</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;output_times</span><span class="pun">(</span><span class="pln">dayss</span><span class="pun">,</span><span class="pln">np</span><span class="pun">.</span><span class="pln">array</span><span class="pun">(</span><span class="pln">timess</span><span class="pun">))</span><span class="pln"><br><br>print_times</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="lit">7</span><span class="pun">,</span><span class="lit">30</span><span class="pun">,</span><span class="lit">365</span><span class="pun">,</span><span class="pln">df</span><span class="pun">[</span><span class="str">'D'</span><span class="pun">].</span><span class="pln">iloc</span><span class="pun">[-</span><span class="lit">1</span><span class="pun">]])</span></pre>

  <pre class="codeblock-result"><span class="pln">past&nbsp;days&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">1</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">7</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">30</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">365</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">1027</span><span class="pln"><br>productive&nbsp;&nbsp;</span><span class="lit">0.163</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.044</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.181</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.229</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.206</span><span class="pln"><br>fun&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">0.552</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.596</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.396</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.298</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.180</span><span class="pln"><br>routine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">0.072</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.082</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.072</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.068</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.069</span><span class="pln"><br>waste&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">0.058</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.101</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.080</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.111</span><span class="pln">&nbsp;&nbsp;</span><span class="lit">0.089</span></pre>

  <pre class="codeblock"><span class="pln">r</span><span class="pun">=</span><span class="pln">requests</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"[webDAV&nbsp;calendar&nbsp;URL]"</span><span class="pun">)</span><span class="pln"><br></span><span class="kwd">with</span><span class="pln">&nbsp;open</span><span class="pun">(</span><span class="str">"cal.ics"</span><span class="pun">,</span><span class="str">"wb"</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="kwd">as</span><span class="pln">&nbsp;f</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;f</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">r</span><span class="pun">.</span><span class="pln">content</span><span class="pun">)</span><span class="pln"><br><br><br>cal</span><span class="pun">=</span><span class="typ">Calendar</span><span class="pun">.</span><span class="pln">from_ical</span><span class="pun">(</span><span class="pln">open</span><span class="pun">(</span><span class="str">"cal.ics"</span><span class="pun">,</span><span class="str">"rb"</span><span class="pun">).</span><span class="pln">read</span><span class="pun">())</span><span class="pln"><br><br>recurring&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;recurring_ical_events</span><span class="pun">.</span><span class="kwd">of</span><span class="pun">(</span><span class="pln">cal</span><span class="pun">).</span><span class="pln">at</span><span class="pun">(</span><span class="pln">date</span><span class="pun">.</span><span class="pln">today</span><span class="pun">())</span><span class="pln"><br></span><span class="kwd">def</span><span class="pln">&nbsp;eventcompare</span><span class="pun">(</span><span class="pln">e</span><span class="pun">):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln">&nbsp;e</span><span class="pun">[</span><span class="str">"DTSTART"</span><span class="pun">].</span><span class="pln">dt<br>recurring</span><span class="pun">.</span><span class="pln">sort</span><span class="pun">(</span><span class="pln">key</span><span class="pun">=</span><span class="pln">eventcompare</span><span class="pun">)</span><span class="pln"><br><br></span><span class="kwd">print</span><span class="pun">(</span><span class="str">"\nCALENDAR"</span><span class="pun">)</span><span class="pln"><br></span><span class="kwd">for</span><span class="pln">&nbsp;component&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;recurring</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;start</span><span class="pun">=</span><span class="pln">component</span><span class="pun">[</span><span class="str">"DTSTART"</span><span class="pun">].</span><span class="pln">dt</span><span class="pun">.</span><span class="pln">time</span><span class="pun">()</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">=</span><span class="pln">component</span><span class="pun">[</span><span class="str">"DTEND"</span><span class="pun">].</span><span class="pln">dt</span><span class="pun">.</span><span class="pln">time</span><span class="pun">()</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">str</span><span class="pun">(</span><span class="pln">start</span><span class="pun">)+</span><span class="str">"-"</span><span class="pun">+</span><span class="pln">str</span><span class="pun">(</span><span class="kwd">end</span><span class="pun">)+</span><span class="str">"&nbsp;"</span><span class="pun">+</span><span class="pln">component</span><span class="pun">[</span><span class="str">"SUMMARY"</span><span class="pun">])</span></pre>

  <pre class="codeblock-result"><span class="pln"><br>CALENDAR<br></span><span class="lit">08</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">00</span><span class="pun">-</span><span class="lit">10</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;cc<br></span><span class="lit">19</span><span class="pun">:</span><span class="lit">10</span><span class="pun">:</span><span class="lit">00</span><span class="pun">-</span><span class="lit">20</span><span class="pun">:</span><span class="lit">25</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;linreg</span></pre>

  <pre class="codeblock"><span class="kwd">print</span><span class="pun">(</span><span class="str">"\nTODO"</span><span class="pun">)</span><span class="pln"><br></span><span class="kwd">def</span><span class="pln">&nbsp;todocompare</span><span class="pun">(</span><span class="pln">e</span><span class="pun">):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln">&nbsp;e</span><span class="pun">[</span><span class="str">"DUE"</span><span class="pun">].</span><span class="pln">dt<br>eventsort</span><span class="pun">=[</span><span class="pln">e&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;e&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;cal</span><span class="pun">.</span><span class="pln">walk</span><span class="pun">()</span><span class="pln">&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;e</span><span class="pun">.</span><span class="pln">name</span><span class="pun">==</span><span class="str">"VTODO"</span><span class="pln">&nbsp;</span><span class="kwd">and</span><span class="pln">&nbsp;e</span><span class="pun">[</span><span class="str">"STATUS"</span><span class="pun">]!=</span><span class="str">"COMPLETED"</span><span class="pun">]</span><span class="pln"><br>eventsort</span><span class="pun">.</span><span class="pln">sort</span><span class="pun">(</span><span class="pln">key</span><span class="pun">=</span><span class="pln">todocompare</span><span class="pun">)</span><span class="pln"><br></span><span class="kwd">for</span><span class="pln">&nbsp;component&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;eventsort</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;component</span><span class="pun">.</span><span class="pln">name</span><span class="pun">==</span><span class="str">"VTODO"</span><span class="pln">&nbsp;</span><span class="kwd">and</span><span class="pln">&nbsp;component</span><span class="pun">[</span><span class="str">"STATUS"</span><span class="pun">]!=</span><span class="str">"COMPLETED"</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">#print(component)</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dt</span><span class="pun">=</span><span class="pln">component</span><span class="pun">[</span><span class="str">"DUE"</span><span class="pun">].</span><span class="pln">dt<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">str</span><span class="pun">(</span><span class="pln">dt</span><span class="pun">.</span><span class="pln">date</span><span class="pun">())+</span><span class="str">"&nbsp;"</span><span class="pun">+</span><span class="pln">str</span><span class="pun">(</span><span class="pln">dt</span><span class="pun">.</span><span class="pln">time</span><span class="pun">())+</span><span class="str">"&nbsp;"</span><span class="pun">+</span><span class="pln">component</span><span class="pun">[</span><span class="str">"SUMMARY"</span><span class="pun">])</span></pre>

  <pre class="codeblock-result"><span class="pln"><br>TODO<br></span><span class="lit">2021</span><span class="pun">-</span><span class="lit">03</span><span class="pun">-</span><span class="lit">08</span><span class="pln">&nbsp;</span><span class="lit">14</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;groceries<br></span><span class="lit">2021</span><span class="pun">-</span><span class="lit">03</span><span class="pun">-</span><span class="lit">10</span><span class="pln">&nbsp;</span><span class="lit">08</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;fundies</span><span class="pun">-</span><span class="pln">hw5<br></span><span class="lit">2021</span><span class="pun">-</span><span class="lit">03</span><span class="pun">-</span><span class="lit">13</span><span class="pln">&nbsp;</span><span class="lit">23</span><span class="pun">:</span><span class="lit">59</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;bayesian</span><span class="pun">-</span><span class="pln">hw4</span></pre>

  <p>Source: <span class="code"><a href="log-report.py">log-report.py</a></span></p>
  
  <h2>weather-report.py</h2>
  <p><span class="code">weather-report.py</span> is a Python script which makes a request to the OpenWeatherMap API and outputs some useful weather information.</p>
  
  <pre class="codeblock"><span class="com">#!/usr/bin/env&nbsp;python</span><span class="pln"><br><br></span><span class="kwd">import</span><span class="pln">&nbsp;requests<br></span><span class="kwd">import</span><span class="pln">&nbsp;numpy&nbsp;</span><span class="kwd">as</span><span class="pln">&nbsp;np<br></span><span class="kwd">import</span><span class="pln">&nbsp;pandas&nbsp;</span><span class="kwd">as</span><span class="pln">&nbsp;pd<br></span><span class="kwd">from</span><span class="pln">&nbsp;datetime&nbsp;</span><span class="kwd">import</span><span class="pln">&nbsp;datetime</span><span class="pun">,</span><span class="pln">&nbsp;date<br><br>r</span><span class="pun">=</span><span class="pln">requests</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'https://api.openweathermap.org/data/2.5/onecall?lat=LATITUDE&amp;lon=LONGITUDE&amp;exclude=minutely,daily&amp;appid=APIKEY'</span><span class="pun">)</span><span class="pln"><br>data</span><span class="pun">=</span><span class="pln">r</span><span class="pun">.</span><span class="pln">json</span><span class="pun">()</span><span class="pln"><br><br>sunrise</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">datetime</span><span class="pun">.</span><span class="pln">fromtimestamp</span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="str">"current"</span><span class="pun">][</span><span class="str">"sunrise"</span><span class="pun">]).</span><span class="pln">time</span><span class="pun">())</span><span class="pln"><br>sunset</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">datetime</span><span class="pun">.</span><span class="pln">fromtimestamp</span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="str">"current"</span><span class="pun">][</span><span class="str">"sunset"</span><span class="pun">]).</span><span class="pln">time</span><span class="pun">())</span><span class="pln"><br></span><span class="kwd">print</span><span class="pun">(</span><span class="str">"sunrise:"</span><span class="pun">+</span><span class="pln">sunrise</span><span class="pun">+</span><span class="str">"&nbsp;&nbsp;sunset:"</span><span class="pun">+</span><span class="pln">sunset</span><span class="pun">)</span></pre>
  
  <pre class="codeblock-result"><span class="pln"><br>sunrise</span><span class="pun">:</span><span class="lit">06</span><span class="pun">:</span><span class="lit">18</span><span class="pun">:</span><span class="lit">30</span><span class="pln">&nbsp;&nbsp;sunset</span><span class="pun">:</span><span class="lit">17</span><span class="pun">:</span><span class="lit">54</span><span class="pun">:</span><span class="lit">39</span></pre>
  
  <pre class="codeblock"><span class="pln">hourly</span><span class="pun">=</span><span class="pln">np</span><span class="pun">.</span><span class="pln">array</span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="str">'hourly'</span><span class="pun">])[:</span><span class="lit">24</span><span class="pun">]</span><span class="pln"><br><br>times</span><span class="pun">=[</span><span class="pln">datetime</span><span class="pun">.</span><span class="pln">fromtimestamp</span><span class="pun">(</span><span class="pln">hour</span><span class="pun">[</span><span class="str">"dt"</span><span class="pun">]).</span><span class="pln">time</span><span class="pun">()</span><span class="pln">&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;hour&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;hourly</span><span class="pun">]</span><span class="pln"><br>temps</span><span class="pun">=[</span><span class="pln">round</span><span class="pun">(</span><span class="pln">hour</span><span class="pun">[</span><span class="str">"temp"</span><span class="pun">]-</span><span class="lit">273.15</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;hour&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;hourly</span><span class="pun">]</span><span class="pln"><br>feels_likes</span><span class="pun">=[</span><span class="pln">round</span><span class="pun">(</span><span class="pln">hour</span><span class="pun">[</span><span class="str">"feels_like"</span><span class="pun">]-</span><span class="lit">273.15</span><span class="pun">)</span><span class="pln">&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;hour&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;hourly</span><span class="pun">]</span><span class="pln"><br>descs</span><span class="pun">=[</span><span class="pln">hour</span><span class="pun">[</span><span class="str">"weather"</span><span class="pun">][</span><span class="lit">0</span><span class="pun">][</span><span class="str">'description'</span><span class="pun">]</span><span class="pln">&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;hour&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;hourly</span><span class="pun">]</span><span class="pln"><br>weather</span><span class="pun">=</span><span class="pln">pd</span><span class="pun">.</span><span class="typ">DataFrame</span><span class="pun">(</span><span class="pln">list</span><span class="pun">(</span><span class="pln">zip</span><span class="pun">(</span><span class="pln">times</span><span class="pun">,</span><span class="pln">temps</span><span class="pun">,</span><span class="pln">feels_likes</span><span class="pun">,</span><span class="pln">descs</span><span class="pun">)),</span><span class="pln">columns</span><span class="pun">=[</span><span class="str">"Time"</span><span class="pun">,</span><span class="str">"Temp"</span><span class="pun">,</span><span class="str">"Feels"</span><span class="pun">,</span><span class="str">"Description"</span><span class="pun">])</span><span class="pln"><br><br></span><span class="kwd">print</span><span class="pun">(</span><span class="pln">weather</span><span class="pun">.</span><span class="pln">to_string</span><span class="pun">(</span><span class="pln">index</span><span class="pun">=</span><span class="kwd">False</span><span class="pun">)+</span><span class="str">"\n"</span><span class="pun">)</span></pre>
  
  <pre class="codeblock-result"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Time</span><span class="pln">&nbsp;&nbsp;</span><span class="typ">Temp</span><span class="pln">&nbsp;&nbsp;</span><span class="typ">Feels</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Description</span><span class="pln"><br></span><span class="lit">13</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">2</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">14</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">2</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">15</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">4</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">1</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">16</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">4</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">0</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">17</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">5</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">1</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">18</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">4</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">1</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">19</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">4</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">0</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">20</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">1</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">21</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">1</span><span class="pln">&nbsp;scattered&nbsp;clouds<br></span><span class="lit">22</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">1</span><span class="pln">&nbsp;scattered&nbsp;clouds<br></span><span class="lit">23</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">2</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;few&nbsp;clouds<br></span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">2</span><span class="pln">&nbsp;scattered&nbsp;clouds<br></span><span class="lit">01</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">2</span><span class="pln">&nbsp;scattered&nbsp;clouds<br></span><span class="lit">02</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">2</span><span class="pln">&nbsp;scattered&nbsp;clouds<br></span><span class="lit">03</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;broken&nbsp;clouds<br></span><span class="lit">04</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">3</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">2</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;broken&nbsp;clouds<br></span><span class="lit">05</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">4</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">2</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;broken&nbsp;clouds<br></span><span class="lit">06</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">4</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">2</span><span class="pln">&nbsp;&nbsp;overcast&nbsp;clouds<br></span><span class="lit">07</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">4</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">-</span><span class="lit">1</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;broken&nbsp;clouds<br></span><span class="lit">08</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">5</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">0</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">09</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">7</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">2</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">10</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">9</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">4</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">11</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">10</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">4</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky<br></span><span class="lit">12</span><span class="pun">:</span><span class="lit">00</span><span class="pun">:</span><span class="lit">00</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">10</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="lit">5</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;sky</span><br><br></pre>

  <p>Source: <span class="code"><a href="weather-report.py">weather-report.py</a></span></p>

  <h2>news-report.py</h2>

  <p><span class="code">news-report.py</span> is a Python script which uses RSS to grab some news headlines and upcoming rocket launches.</p>
  <pre class="codeblock"><span class="com">#!/usr/bin/env&nbsp;python</span><span class="pln"><br></span><span class="com">#&nbsp;coding:&nbsp;utf-8</span><span class="pln"><br><br></span><span class="kwd">import</span><span class="pln">&nbsp;feedparser<br></span><span class="kwd">from</span><span class="pln">&nbsp;datetime&nbsp;</span><span class="kwd">import</span><span class="pln">&nbsp;datetime</span><span class="pun">,</span><span class="pln">&nbsp;date<br></span><span class="kwd">from</span><span class="pln">&nbsp;time&nbsp;</span><span class="kwd">import</span><span class="pln">&nbsp;mktime<br></span><span class="kwd">import</span><span class="pln">&nbsp;requests<br></span><span class="kwd">import</span><span class="pln">&nbsp;numpy&nbsp;</span><span class="kwd">as</span><span class="pln">&nbsp;np<br><br>urls</span><span class="pun">=[</span><span class="str">"rss&nbsp;feed&nbsp;url&nbsp;1"</span><span class="pun">,</span><span class="str">"rss&nbsp;feed&nbsp;url&nbsp;2"</span><span class="pun">…]</span><span class="pln"><br><br>feeds</span><span class="pun">=[]</span><span class="pln"><br></span><span class="kwd">for</span><span class="pln">&nbsp;url&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;urls</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;feeds</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">feedparser</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">url</span><span class="pun">))</span><span class="pln"><br><br>now</span><span class="pun">=</span><span class="pln">datetime</span><span class="pun">.</span><span class="pln">now</span><span class="pun">()</span><span class="pln"><br></span><span class="kwd">for</span><span class="pln">&nbsp;d&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;feeds</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;entries</span><span class="pun">=[]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;entry&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;d</span><span class="pun">[</span><span class="str">'entries'</span><span class="pun">]:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts</span><span class="pun">=</span><span class="pln">entry</span><span class="pun">[</span><span class="str">'published_parsed'</span><span class="pun">]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">#print(ts)</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta</span><span class="pun">=</span><span class="pln">now</span><span class="pun">-</span><span class="pln">datetime</span><span class="pun">.</span><span class="pln">fromtimestamp</span><span class="pun">(</span><span class="pln">mktime</span><span class="pun">(</span><span class="pln">ts</span><span class="pun">))</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;days</span><span class="pun">=</span><span class="pln">delta</span><span class="pun">.</span><span class="pln">total_seconds</span><span class="pun">()/</span><span class="lit">60</span><span class="pun">/</span><span class="lit">60</span><span class="pun">/</span><span class="lit">24</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">days</span><span class="pun">&lt;</span><span class="lit">1</span><span class="pun">):</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entries</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">entry</span><span class="pun">[</span><span class="str">'title'</span><span class="pun">])</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln">&nbsp;entries</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">d</span><span class="pun">[</span><span class="str">'feed'</span><span class="pun">][</span><span class="str">'title'</span><span class="pun">]+</span><span class="str">"---------------------------"</span><span class="pun">)</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln">&nbsp;entry&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;entries</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">entry</span><span class="pun">)</span><span class="pln"><br><br></span><span class="kwd">print</span><span class="pun">(</span><span class="str">"rockets:-----------------"</span><span class="pun">)</span><span class="pln"><br>r</span><span class="pun">=</span><span class="pln">requests</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'https://fdo.rocketlaunch.live/json/launches/next/5'</span><span class="pun">)</span><span class="pln"><br>data</span><span class="pun">=</span><span class="pln">np</span><span class="pun">.</span><span class="pln">array</span><span class="pun">(</span><span class="pln">r</span><span class="pun">.</span><span class="pln">json</span><span class="pun">()[</span><span class="str">'result'</span><span class="pun">])[:</span><span class="lit">2</span><span class="pun">]</span><span class="pln"><br></span><span class="kwd">for</span><span class="pln">&nbsp;launch&nbsp;</span><span class="kwd">in</span><span class="pln">&nbsp;data</span><span class="pun">:</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;date</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">datetime</span><span class="pun">.</span><span class="pln">fromtimestamp</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">(</span><span class="pln">launch</span><span class="pun">[</span><span class="str">'sort_date'</span><span class="pun">])))</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;provider</span><span class="pun">=</span><span class="pln">launch</span><span class="pun">[</span><span class="str">'provider'</span><span class="pun">][</span><span class="str">'name'</span><span class="pun">]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;vehicle</span><span class="pun">=</span><span class="pln">launch</span><span class="pun">[</span><span class="str">'vehicle'</span><span class="pun">][</span><span class="str">'name'</span><span class="pun">]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;mission</span><span class="pun">=</span><span class="pln">launch</span><span class="pun">[</span><span class="str">'missions'</span><span class="pun">][</span><span class="lit">0</span><span class="pun">][</span><span class="str">'name'</span><span class="pun">]</span><span class="pln"><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">date</span><span class="pun">+</span><span class="str">":&nbsp;"</span><span class="pun">+</span><span class="pln">provider</span><span class="pun">+</span><span class="str">"&nbsp;"</span><span class="pun">+</span><span class="pln">vehicle</span><span class="pun">+</span><span class="str">".&nbsp;"</span><span class="pun">+</span><span class="pln">launch</span><span class="pun">[</span><span class="str">'missions'</span><span class="pun">][</span><span class="lit">0</span><span class="pun">][</span><span class="str">'name'</span><span class="pun">])</span><span class="pln"><br><br></span><span class="kwd">print</span><span class="pun">(</span><span class="str">"\x1BJ\xD8\x1BJ\xD8\x1BJ\x6C"</span><span class="pun">)</span></pre>
  <p>Note that, at the very end, it also outputs some bytes which tell the printer to feed the paper out a few centimeters.</p>

  <p>Source: <span class="code"><a href="news-report.py">news-report.py</a></span></p>

  <!--#include virtual="/footer.html"-->

</body>
</html>